[build]
builder = "railpack"
setupCommand = "apt-get update && apt-get install -y openjdk-17-jdk && chmod +x gradlew"
buildCommand = "./gradlew build -x test"

[start]
cmd = "java -Dserver.port=$PORT -Dspring.profiles.active=prod -jar build/libs/iStudy-0.0.1-SNAPSHOT.jar"

[variables]
JAVA_VERSION = "17"
SPRING_PROFILES_ACTIVE = "prod"

[deploy]
healthcheckPath = "/actuator/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10